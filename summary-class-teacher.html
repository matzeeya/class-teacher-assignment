<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-sessionstorage/iron-sessionstorage.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-tabs/paper-tabs.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-styles/typography.html">
<link rel="import" href="../paper-item/paper-icon-item.html">


<link href="https://fonts.googleapis.com/css?family=Itim&amp;subset=thai" rel="stylesheet">

<dom-module id="summary-class-teacher">
  <template>
    <style is="custom-style" include="iron-flex iron-flex-alignment iron-flex-factors"> 
      :host {
        @apply --layout-vertical;
        @apply --paper-font-body;
      }
      .main {
        padding-left:50px;
      }
      .border-bottom {
        font-family: 'Itim', cursive;
        font-size: 100%;
        color: #000;
        opacity: 0.75;
        height:50px;
        width: 150px;
        border-bottom-width:1px;
        border-bottom-style:solid;
        border-bottom-color: var(--divider-color);
      }
      /* ---font---- */
      .font-header {
        font-family: 'Itim', cursive;
        font-size: 120%;
        font-weight: bold;
      }
      .font-face {
        font-family: 'Itim', cursive;
        font-size: 120%;
      }
      
      .header-bgcolor{
        height: 90px;
        background-color: #3f51b5;
      }

      .bgcolor{
        background-color: #eeeeee;
        height: 100%;
        width: 100%;
      }

      /* ---tabs---- */
      paper-tabs {
        --paper-tabs-selection-bar-color: #F44336;
        background-color: var(--paper-grey-50);
        height: 50px;
      }

      .margin-bottom{
        margin-top: 25px;
        margin-left:20px;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
        background-color: #5667c4;
      }

      .help-margin{
        margin-top: 25px;
        text-align: right;
        margin-right: 20px;
        color: #eeeeee;
        font-family: 'Itim', cursive;
        font-size: 120%;
      }
      paper-listbox{
        background-color: #eeeeee;
        font-family: 'Itim', cursive;
        font-size: 120%;
      }

      iron-icon:hover{
        cursor:hand;
        cursor:pointer;
      }
      </style>

      <iron-sessionstorage name="hostId" use-raw value="{{hostId}}">
      </iron-sessionstorage>

      <iron-sessionstorage name="token" use-raw value="{{token}}">
      </iron-sessionstorage>

      <iron-ajax id="getHost"
        method="POST"
        url="https://maas.nuqlis.com:8000/v2/obec/school/query"
        headers$='{"Authorization":"JWT {{token}}"}'
        content-type="application/json"
        body$='{"query":{"hostid":"{{hostId}}"}}'
        on-response="_handleResponse">
      </iron-ajax>

  </template>

  <script>
    class SummaryClassTeacher extends Polymer.Element {
      static get is() { return 'summary-class-teacher'; }
      static get properties() {
        return {
          hostId:{
            type:String,
            notify:true
          },
          year:{
           type:String,
          },
          classroom:{
           type:Array,
           notify:true
          },
          selectedClass: {
            type:Object,
            computed: '__executeSelectedClass(rooms,selectedLevel)'
          }
        };
      }

      static get observers() {
        return [
          "_execute(hostId,token)"
        ]
      }

      _execute(hostId,token) {
        if(!token || !hostId) return;
        this.$.getHost.generateRequest();
      }

      _handleResponse(e) {
        if(e.detail.response.length > 0) {
          var doc = e.detail.response[0];
          this.set('classroom',doc.classroom);
        }
      }

    }

    window.customElements.define(SummaryClassTeacher.is, 
      SummaryClassTeacher);
  </script>
</dom-module>
